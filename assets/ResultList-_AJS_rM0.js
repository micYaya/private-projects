import{f as b}from"./vue-core-FVfctkgB.js";import{_ as x,q as O,s as q,t as U,v as E}from"./index-BBriGWV3.js";import"vue";const D={__name:"ResultForm",props:{resultInfo:{type:Object,default:()=>({})}},setup(e){return(i,t)=>{const a=Vue.__unplugin_components_0,d=Vue.__unplugin_components_1,n=Vue.__unplugin_components_2,u=Vue.__unplugin_components_3,o=Vue.__unplugin_components_4,s=Vue.__unplugin_components_5;return Vue.openBlock(),Vue.createBlock(s,{ref:"resultForm",model:e.resultInfo,"label-width":"150px","show-message":!1},{default:Vue.withCtx(()=>[Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"关联设备编号："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.deviceId,"onUpdate:modelValue":t[0]||(t[0]=l=>e.resultInfo.deviceId=l),placeholder:"输入设备ID"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"二次电压（U）："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.twoP,"onUpdate:modelValue":t[1]||(t[1]=l=>e.resultInfo.twoP=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"tanψ："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.tanValue,"onUpdate:modelValue":t[2]||(t[2]=l=>e.resultInfo.tanValue=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"计量点编号："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.measuredId,"onUpdate:modelValue":t[3]||(t[3]=l=>e.resultInfo.measuredId=l),modelModifiers:{number:!0},placeholder:"输入编号"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"温度："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.temperature,"onUpdate:modelValue":t[4]||(t[4]=l=>e.resultInfo.temperature=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"湿度："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.humidity,"onUpdate:modelValue":t[5]||(t[5]=l=>e.resultInfo.humidity=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"测试日期："},{default:Vue.withCtx(()=>[Vue.createVNode(o,{modelValue:e.resultInfo.testDate,"onUpdate:modelValue":t[6]||(t[6]=l=>e.resultInfo.testDate=l),type:"date",placeholder:"选择日期"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"fa："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.fa,"onUpdate:modelValue":t[7]||(t[7]=l=>e.resultInfo.fa=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"fb："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.fb,"onUpdate:modelValue":t[8]||(t[8]=l=>e.resultInfo.fb=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"fc："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.fc,"onUpdate:modelValue":t[9]||(t[9]=l=>e.resultInfo.fc=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"da："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.da,"onUpdate:modelValue":t[10]||(t[10]=l=>e.resultInfo.da=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"db："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.db,"onUpdate:modelValue":t[11]||(t[11]=l=>e.resultInfo.db=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"dc："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.dc,"onUpdate:modelValue":t[12]||(t[12]=l=>e.resultInfo.dc=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"dUa："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.dUa,"onUpdate:modelValue":t[13]||(t[13]=l=>e.resultInfo.dUa=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"dUb："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.dUb,"onUpdate:modelValue":t[14]||(t[14]=l=>e.resultInfo.dUb=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"dUc："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.dUc,"onUpdate:modelValue":t[15]||(t[15]=l=>e.resultInfo.dUc=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"Upta："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.Upta,"onUpdate:modelValue":t[16]||(t[16]=l=>e.resultInfo.Upta=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"Uptb："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.Uptb,"onUpdate:modelValue":t[17]||(t[17]=l=>e.resultInfo.Uptb=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"Uptc："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.Uptc,"onUpdate:modelValue":t[18]||(t[18]=l=>e.resultInfo.Uptc=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"Uyba："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.Uyba,"onUpdate:modelValue":t[19]||(t[19]=l=>e.resultInfo.Uyba=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"Uybb："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.Uybb,"onUpdate:modelValue":t[20]||(t[20]=l=>e.resultInfo.Uybb=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"Uybc："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.Uybc,"onUpdate:modelValue":t[21]||(t[21]=l=>e.resultInfo.Uybc=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"r%："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.rate,"onUpdate:modelValue":t[22]||(t[22]=l=>e.resultInfo.rate=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"res1："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.res1,"onUpdate:modelValue":t[23]||(t[23]=l=>e.resultInfo.res1=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Vue.createVNode(u,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"res2："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.res2,"onUpdate:modelValue":t[24]||(t[24]=l=>e.resultInfo.res2=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"res3："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.res3,"onUpdate:modelValue":t[25]||(t[25]=l=>e.resultInfo.res3=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1}),Vue.createVNode(n,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(d,{label:"res4："},{default:Vue.withCtx(()=>[Vue.createVNode(a,{modelValue:e.resultInfo.res4,"onUpdate:modelValue":t[26]||(t[26]=l=>e.resultInfo.res4=l),modelModifiers:{number:!0},placeholder:"输入数值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}},G={class:"modal"},H={class:"modal-content"},J={class:"modal-footer"},Q={__name:"EditResult",props:{resultInfo:{type:Object,default:()=>({})},isEditVisible:{type:Boolean,default:!1}},emits:["close","refresh"],setup(e,{emit:i}){const t=e,a=i,d=async()=>{t.resultInfo.testDate&&(t.resultInfo.testDate=b(t.resultInfo.testDate,"yyyy-MM-dd")),console.log("要发送的数据:",t.resultInfo);try{await O(t.resultInfo.resultId,t.resultInfo),a("refresh"),a("close")}catch(u){console.error("保存结果失败:",u)}},n=()=>{a("close")};return(u,o)=>{const s=Vue.__unplugin_components_0;return e.isEditVisible?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"modal-overlay",style:{"z-index":"99"},onClick:Vue.withModifiers(n,["self"])},[Vue.createElementVNode("div",G,[Vue.createElementVNode("div",{class:"modal-header"},[o[0]||(o[0]=Vue.createElementVNode("span",null,"编辑结果",-1)),Vue.createElementVNode("button",{onClick:n},"×")]),Vue.createElementVNode("div",H,[Vue.createVNode(D,{"result-info":e.resultInfo},null,8,["result-info"])]),Vue.createElementVNode("div",J,[Vue.createVNode(s,{type:"primary",onClick:d},{default:Vue.withCtx(()=>o[1]||(o[1]=[Vue.createTextVNode(" 保存 ")])),_:1}),Vue.createVNode(s,{onClick:u.resetForm},{default:Vue.withCtx(()=>o[2]||(o[2]=[Vue.createTextVNode(" 重置 ")])),_:1},8,["onClick"])])])])):Vue.createCommentVNode("",!0)}}},W=x(Q,[["__scopeId","data-v-4cd168a3"]]),X={class:"modal"},Y={class:"modal-content"},Z={class:"modal-footer"},ee={__name:"ViewResult",props:{resultInfo:{type:Object,default:()=>({})},isViewVisible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:i}){const t=i,a=()=>{t("close")};return(d,n)=>{const u=Vue.__unplugin_components_0,o=Vue.__unplugin_components_1,s=Vue.__unplugin_components_2,l=Vue.__unplugin_components_3,w=Vue.__unplugin_components_4;return e.isViewVisible?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"modal-overlay",style:{"z-index":"99"},onClick:Vue.withModifiers(a,["self"])},[Vue.createElementVNode("div",X,[Vue.createElementVNode("div",{class:"modal-header"},[n[0]||(n[0]=Vue.createElementVNode("span",null,"结果详情",-1)),Vue.createElementVNode("button",{onClick:a},"×")]),Vue.createElementVNode("div",Y,[Vue.createVNode(l,{model:e.resultInfo,"label-width":"150px"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"关联设备编号："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.deviceId),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"二次电压（U）："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.twoP),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"tanψ："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.tanValue),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"计量点编号："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.measuredId),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"温度："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.temperature),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"湿度："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.humidity),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"测试日期："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(Vue.unref(b)(e.resultInfo.testDate,"yyyy-MM-dd")),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"fa："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.fa),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"fb："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.fb),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"fc："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.fc),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"da："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.da),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"db："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.db),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"dc："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.dc),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"dUa："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.dUa),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"dUb："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.dUb),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"dUc："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.dUc),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"Upta："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.Upta),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"Uptb："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.Uptb),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"Uptc："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.Uptc),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"Uyba："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.Uyba),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"Uybb："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.Uybb),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"Uybc："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.Uybc),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"r%："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.rate),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"res1："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.res1),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(s,{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"res2："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.res2),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"res3："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.res3),1)]),_:1})]),_:1}),Vue.createVNode(o,{span:8},{default:Vue.withCtx(()=>[Vue.createVNode(u,{label:"res4："},{default:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.resultInfo.res4),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),Vue.createElementVNode("div",Z,[Vue.createVNode(w,{onClick:a},{default:Vue.withCtx(()=>n[1]||(n[1]=[Vue.createTextVNode(" 关闭 ")])),_:1})])])])):Vue.createCommentVNode("",!0)}}},te=x(ee,[["__scopeId","data-v-10170a8f"]]),le={class:"modal"},ue={class:"modal-content"},ae={class:"modal-footer"},oe={__name:"AddResult",props:{isAddVisible:{type:Boolean,default:!1}},emits:["close","refresh"],setup(e,{emit:i}){const t=i,a=Vue.ref({deviceId:"",twoP:null,tanValue:null,measuredId:null,temperature:null,humidity:null,testDate:null,fa:null,fb:null,fc:null,da:null,db:null,dc:null,dUa:null,dUb:null,dUc:null,Upta:null,Uptb:null,Uptc:null,Uyba:null,Uybb:null,Uybc:null,rate:null,res1:null,res2:null,res3:null,res4:null}),d=async()=>{a.value.testDate&&(a.value.testDate=b(a.value.testDate,"yyyy-MM-dd"));try{await q(a.value),t("refresh"),t("close"),n()}catch(o){console.error("保存结果失败:",o)}},n=()=>{a.value={deviceId:"",twoP:null,tanValue:null,measuredId:null,temperature:null,humidity:null,testDate:null,fa:null,fb:null,fc:null,da:null,db:null,dc:null,dUa:null,dUb:null,dUc:null,Upta:null,Uptb:null,Uptc:null,Uyba:null,Uybb:null,Uybc:null,rate:null,res1:null,res2:null,res3:null,res4:null}},u=()=>{t("close")};return(o,s)=>{const l=Vue.__unplugin_components_0;return e.isAddVisible?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"modal-overlay",style:{"z-index":"99"},onClick:Vue.withModifiers(u,["self"])},[Vue.createElementVNode("div",le,[Vue.createElementVNode("div",{class:"modal-header"},[s[0]||(s[0]=Vue.createElementVNode("span",null,"添加结果",-1)),Vue.createElementVNode("button",{onClick:u},"×")]),Vue.createElementVNode("div",ue,[Vue.createVNode(D,{"result-info":a.value},null,8,["result-info"])]),Vue.createElementVNode("div",ae,[Vue.createVNode(l,{type:"primary",onClick:d},{default:Vue.withCtx(()=>s[1]||(s[1]=[Vue.createTextVNode(" 保存 ")])),_:1}),Vue.createVNode(l,{onClick:n},{default:Vue.withCtx(()=>s[2]||(s[2]=[Vue.createTextVNode(" 重置 ")])),_:1})])])])):Vue.createCommentVNode("",!0)}}},ne=x(oe,[["__scopeId","data-v-c616daa7"]]),de={class:"list-container"},Ve={class:"upper-section"},re={class:"search-filter"},se={class:"action-buttons"},ie={class:"lower-section"},ce=["onClick"],fe=["onClick"],me=["onClick"],Ne={class:"pagination-wrapper"},we={__name:"ResultList",setup(e){const i=Vue.ref([]),t=Vue.ref(""),a=Vue.ref(1),d=Vue.ref(5),n=Vue.ref(0),u=Vue.ref([]),o=Vue.ref(!1),s=Vue.ref([]),l=Vue.ref(!1),w=Vue.ref({}),C=Vue.ref(!1),y=Vue.ref({}),p=Vue.ref(!1),M=r=>r?b(new Date(r),"yyyy-MM-dd"):"",f=async()=>{try{s.value=await U(),n.value=s.value.length;const r=(a.value-1)*d.value,V=r+d.value;i.value=s.value.slice(r,V)}catch(r){console.error("获取结果列表失败",r)}},S=()=>{l.value=!0},k=r=>{w.value={...r},C.value=!0},R=r=>{y.value={...r},p.value=!0},$=r=>{u.value=r,o.value=r.length>0&&r.length<i.value.length,r.length===i.value.length&&(o.value=!1)},B=r=>{r.length===i.value.length?o.value=!1:r.length>0?o.value=!0:o.value=!1,u.value=r},T=()=>!0,g=async()=>{const V=(await U()).filter(I=>String(I.deviceId).includes(t.value));s.value=V,n.value=V.length;const N=(a.value-1)*d.value,h=N+d.value;i.value=V.slice(N,h)},z=async()=>{try{const r=u.value.map(V=>V.resultId);for(const V of r)await E(V);await f()}catch(r){console.error("批量删除结果信息失败",r)}},A=async r=>{try{await E(r),await f()}catch(V){console.error("删除结果信息失败",V)}},P=r=>{ElementPlus.ElMessageBox.confirm("请问您是否要删除该结果信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A(r.resultId)}).catch(()=>{})},j=r=>{d.value=r,a.value=1,f()},F=r=>{a.value=r,f()};return f(),(r,V)=>{const N=Vue.__unplugin_components_0,h=Vue.__unplugin_components_1,I=Vue.__unplugin_components_2,v=Vue.__unplugin_components_3,m=Vue.__unplugin_components_4,L=Vue.__unplugin_components_5,K=Vue.__unplugin_components_6;return Vue.openBlock(),Vue.createElementBlock("div",de,[Vue.createVNode(h,{separator:"/",class:"breadcrumb"},{default:Vue.withCtx(()=>[Vue.createVNode(N,null,{default:Vue.withCtx(()=>V[4]||(V[4]=[Vue.createTextVNode("首页")])),_:1}),Vue.createVNode(N,null,{default:Vue.withCtx(()=>V[5]||(V[5]=[Vue.createTextVNode("实验任务管理")])),_:1}),Vue.createVNode(N,null,{default:Vue.withCtx(()=>V[6]||(V[6]=[Vue.createTextVNode("结果管理")])),_:1})]),_:1}),Vue.createElementVNode("div",Ve,[Vue.createElementVNode("div",re,[Vue.createVNode(I,{modelValue:t.value,"onUpdate:modelValue":V[0]||(V[0]=c=>t.value=c),placeholder:"请输入关联设备编号",style:{width:"250px",margin:"10px 0"},onKeyup:Vue.withKeys(g,["enter"])},null,8,["modelValue"]),Vue.createVNode(v,{type:"primary",onClick:g},{default:Vue.withCtx(()=>V[7]||(V[7]=[Vue.createTextVNode(" 搜索 ")])),_:1})]),Vue.createElementVNode("div",se,[Vue.createVNode(v,{type:"danger",onClick:z},{default:Vue.withCtx(()=>V[8]||(V[8]=[Vue.createTextVNode(" 批量删除 ")])),_:1}),Vue.createVNode(v,{type:"warning",onClick:S},{default:Vue.withCtx(()=>V[9]||(V[9]=[Vue.createTextVNode(" 添加结果 ")])),_:1})])]),V[12]||(V[12]=Vue.createElementVNode("br",null,null,-1)),Vue.createElementVNode("div",ie,[Vue.createVNode(L,{data:i.value,border:"",style:{width:"100%","margin-top":"20px"},"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"},onSelectionChange:$},{default:Vue.withCtx(()=>[Vue.createVNode(m,{type:"selection",width:"60",indeterminate:o.value,selectable:T,onSelectAll:B},null,8,["indeterminate"]),Vue.createVNode(m,{prop:"resultId",label:"结果编号",width:"160"}),Vue.createVNode(m,{prop:"deviceId",label:"关联设备编号",width:"160"}),Vue.createVNode(m,{prop:"twoP",label:"二次电压",width:"160"}),Vue.createVNode(m,{prop:"testDate",label:"测试日期",width:"160"},{default:Vue.withCtx(c=>[Vue.createTextVNode(Vue.toDisplayString(M(c.row.testDate)),1)]),_:1}),Vue.createVNode(m,{prop:"rate",label:"r%",width:"160"}),Vue.createVNode(m,{label:"操作",fixed:"right","min-width":"200"},{default:Vue.withCtx(c=>[Vue.createElementVNode("a",{href:"javascript:void(0)",onClick:_=>k(c.row)},"编辑",8,ce),V[10]||(V[10]=Vue.createElementVNode("span",{class:"divider"},"|",-1)),Vue.createElementVNode("a",{href:"javascript:void(0)",onClick:_=>R(c.row)},"查看详情",8,fe),V[11]||(V[11]=Vue.createElementVNode("span",{class:"divider"},"|",-1)),Vue.createElementVNode("a",{href:"javascript:void(0)",onClick:_=>P(c.row)},"删除",8,me)]),_:1})]),_:1},8,["data"]),Vue.createElementVNode("div",Ne,[Vue.createVNode(K,{"current-page":a.value,"page-sizes":[5,10,15],"page-size":d.value,layout:"total, prev, pager, next, sizes, jumper",total:n.value,onSizeChange:j,onCurrentChange:F},null,8,["current-page","page-size","total"])])]),Vue.createVNode(W,{"result-info":w.value,"is-edit-visible":C.value,onClose:V[1]||(V[1]=c=>C.value=!1),onRefresh:f},null,8,["result-info","is-edit-visible"]),Vue.createVNode(te,{"result-info":y.value,"is-view-visible":p.value,onClose:V[2]||(V[2]=c=>p.value=!1)},null,8,["result-info","is-view-visible"]),Vue.createVNode(ne,{"is-add-visible":l.value,onClose:V[3]||(V[3]=c=>l.value=!1),onRefresh:f},null,8,["is-add-visible"])])}}},pe=x(we,[["__scopeId","data-v-83a56745"]]);export{pe as default};
